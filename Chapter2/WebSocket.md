# WebSocket

WebSocket可以看做是HTTP的升级版，它主要是为了弥补HTTP协议无法持久化和无状态而诞生的。

WebSocket提供了客户端和服务端之间全双工的通信机制。

## 保持通话

HTTP非持久化，当客户端发起 `request` 时，服务器会返回一个 `response`，那么HTTP连接就结束了，TCP也随之关闭，如果想要继续访问服务器就必须重新发起连接。

为了改进，HTTP1.1在请求头中增加了 `Connection: Keep-Alive` 字段，当服务器接受到这个字段后，会保持TCP连接不断开，同时，`response` 中也会增加这一字段，这样，客户端和服务器端就可以只建立一次连接而进行多次HTTP通信了。

这个属性已被加入到标准之中，除非指定 `close` ，为了避免无限制的长连接，服务器也会设置一个 `timeout` 属性，用来指定该长连接可以保持的最长时间。

